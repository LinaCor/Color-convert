import { v4 as uuidv4 } from 'uuid';
import { useEffect, useState } from 'react';
import './my-style.css'
//import Snow from '../img/snowflake-winter-svgrepo-com.svg';


export default function Snowflake({ rgbColor }) {
  const [snow, setSnow] = useState([]);
  const lightColor = rgbConvert(rgbColor, 50);
  const MAX_SNOW = 10;

  function rgbConvert(rgb, amount) {
    let clearColor = rgb.replace(/[rgb()]/g, '');
    let arr = clearColor.split(',').map(Number);

    let newArr = arr.map((item) => {
      return Math.min(item + amount, 255);
    })
    return `rgb(${newArr.join(',')})`;
  }

  useEffect(() => {
    if (snow.length <= MAX_SNOW) {
      setSnow(prev => [...prev, <Snowitem key={uuidv4()} lightColor={lightColor} />])
    }
  }, [lightColor])

  return <>
    <div className="bubble-container">
      <div className="bubble-container__list">
        {snow}
      </div>
    </div>
  </>
}





function Snowitem({ lightColor }) {
  return <>
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" id="Artwork" viewBox="0 0 512 512"><path d="M473.53,371.3l-59.24-34.55,56.28-16.18a10,10,0,0,0-5.52-19.23L390.4,322.81,368.45,310l56.28-16.18a10,10,0,1,0-5.53-19.22l-74.65,21.46-51.47-30,82.77.12h0a10,10,0,0,0,0-20l-83-.12,51.65-30.12,74.65,21.46a10,10,0,1,0,5.53-19.22L368.45,202l21.95-12.8,74.65,21.47a10.16,10.16,0,0,0,2.76.39,10,10,0,0,0,2.76-19.61l-56.28-16.19,59.24-34.55a10,10,0,1,0-10.07-17.27L404.22,158l13.62-57a10,10,0,1,0-19.45-4.65l-18.07,75.54-21.95,12.8L372,127.76a10,10,0,1,0-19.45-4.65l-18.07,75.54L283.82,228.2l41.27-70.66a10,10,0,0,0-17.27-10.09L266,219.05V159.32l56.15-53.67a10,10,0,0,0-13.82-14.46L266,131.65v-25.4l56.15-53.67a10,10,0,0,0-13.82-14.46L266,78.58V10a10,10,0,1,0-20,0V78.58L203.67,38.12a10,10,0,1,0-13.82,14.46L246,106.25v25.4L203.67,91.19a10,10,0,0,0-13.82,14.46L246,159.32v59.73l-41.82-71.6a10,10,0,0,0-17.27,10.09l41.27,70.66-50.66-29.55-18.07-75.54A10,10,0,1,0,140,127.76l13.62,57-21.94-12.8L113.61,96.37A10,10,0,1,0,94.16,101l13.62,57L48.54,123.43A10,10,0,1,0,38.47,140.7l59.24,34.55L41.43,191.44a10,10,0,0,0,2.75,19.61,10.18,10.18,0,0,0,2.77-.39l74.65-21.47,22,12.8L87.27,218.17a10,10,0,1,0,5.53,19.22l74.65-21.46,51.47,30-82.77-.12h0a10,10,0,0,0,0,20l83,.12-51.65,30.12L92.8,274.61a10,10,0,1,0-5.53,19.22L143.55,310l-22,12.8L47,301.34a10,10,0,0,0-5.52,19.23l56.28,16.18L38.47,371.3a10,10,0,0,0,5.05,18.64,9.86,9.86,0,0,0,5-1.37L107.78,354,94.16,411a10,10,0,0,0,7.4,12,9.83,9.83,0,0,0,2.33.28,10,10,0,0,0,9.72-7.68l18.07-75.54,21.94-12.8L140,384.24a10,10,0,1,0,19.45,4.65l18.07-75.54,50.66-29.55-41.27,70.66a10,10,0,1,0,17.27,10.09L246,293v59.73l-56.15,53.67a10,10,0,0,0,13.82,14.46L246,380.35v25.4l-56.15,53.67a10,10,0,0,0,13.82,14.46L246,433.42V502a10,10,0,0,0,20,0V433.42l42.33,40.46a10,10,0,0,0,13.82-14.46L266,405.75v-25.4l42.33,40.46a10,10,0,0,0,13.82-14.46L266,352.68V293l41.82,71.6a10,10,0,0,0,8.65,5,10,10,0,0,0,8.62-15.05L283.82,283.8l50.66,29.55,18.07,75.54A10,10,0,1,0,372,384.24l-13.63-56.95,21.95,12.8,18.07,75.54a10,10,0,0,0,9.72,7.68,9.83,9.83,0,0,0,2.33-.28,10,10,0,0,0,7.4-12l-13.62-57,59.24,34.55a9.86,9.86,0,0,0,5,1.37,10,10,0,0,0,5-18.64Z" style={{ fill: lightColor }} /></svg>
    </div>
  </>
}

